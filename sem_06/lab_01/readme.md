

# –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

## –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ –ª–µ–∫—Ü–∏–∏

**–§–∞–π–ª** (–û–∫—Å–≤–æ—Ä–¥—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏) -- —ç—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–º–∞—è –≤–æ –≤—Ç–æ—Ä–∏—á–Ω–æ–π –ø–∞–º—è—Ç–∏ –∏–ª–∏ –≤–æ –≤—Å–ø–æ–º–∞–≥–∞—Ç–µ–ª—å–Ω–æ–º –∑–∞–ø–æ–º–∏–Ω–∞—é—â–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å —Ü–µ–ª—å—é –µ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∏–ª–∏ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –æ–±—ä–µ–º–æ–º –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∑–∞–ø–æ–º–∏–Ω–∞—é—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

–í —Ñ–∞–π–ª–µ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ, –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ç–µ–∫—Å—Ç—ã –∏ –ª—é–±–∞—è –¥—Ä—É–≥–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.

**–§–∞–π–ª** (–†—è–∑–∞–Ω–æ–≤–∞) -- –ø–æ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω–∞—è —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö, —Ö—Ä–∞–Ω–∏–º–∞—è –≤–æ –≤—Ç–æ—Ä–∏—á–Ω–æ–π –ø–∞–º—è—Ç–∏.

**–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞** -- —ç—Ç–æ –ø–æ—Ä—è–¥–æ–∫, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π —Å–ø–æ—Å–æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è, –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –Ω–∞ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö –Ω–æ—Å–∏—Ç–µ–ª—è—Ö –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

> –í—Ç–æ—Ä–∏—á–Ω–∞—è –ø–∞–º—è—Ç—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** (—Ç–æ –µ—Å—Ç—å –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —ç–Ω–µ—Ä–≥–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π)

**–ó–∞–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã** -- –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ—Å—Ç—É–ø –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º.

----

–†–∞–∑–±–µ—Ä–µ–º—Å—è –≤ –æ–±—â–∏—Ö —á–µ—Ä—Ç–∞—Ö –≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã UNIX. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Å–µ–±–µ –¥–∏—Å–∫, –ø–æ–¥–µ–ª–µ–Ω–Ω—ã–π –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–¥–µ–ª–æ–≤. –ö–∞–∂–¥—ã–π –∏–∑ —Ä–∞–∑–¥–µ–ª–æ–≤ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ.

![image-20230219162416571](img/img_01.jpg)

**–ò–Ω–¥–µ–∫—Å–Ω—ã–µ —É–∑–ª—ã** -- —ç—Ç–æ –∑–∞–ø–∏—Å–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —Å–≤–µ–¥–µ–Ω–∏–π –æ —Ñ–∞–π–ª–∞—Ö.

* —Ç–∏–ø —Ñ–∞–π–ª–∞–∞
* –±–∏—Ç—ã –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
* —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
* —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –±–ª–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞

–§–∞–π–ª –∫–∞—Ç–∞–ª–æ–≥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–∞–∫ 

* –∏–º—è —Ñ–∞–π–ª–∞
* –Ω–æ–º–µ—Ä –∏–Ω–¥–µ–∫—Å–Ω–æ–≥–æ —É–∑–ª–∞

–ü—Ä–∏—Å–º–æ—Ç—Ä–µ–≤—à–∏—Å—å –±–ª–∏–∂–µ –∫ —Ç–æ–π —á–∞—Å—Ç–∏ –≥—Ä—É–ø–ø—ã —Ü–∏–ª–∏–Ω–¥—Ä–æ–≤, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∏–Ω–¥–µ–∫—Å–Ω—ã–µ —É–∑–ª—ã –∏ –±–ª–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∫–∞—Ä—Ç–∏–Ω—É

![image-20230219162416571](img/img_04.jpg)

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

1. –ó–¥–µ—Å—å –µ—Å—Ç—å –¥–≤–µ –∑–∞–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª–µ –∫–∞—Ç–∞–ª–æ–≥–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∏–Ω–¥–µ–∫—Å–Ω—ã–π —É–∑–µ–ª. –ü—Ä–∏ —ç—Ç–æ–º –∫–∞–∂–¥—ã–π –∏–Ω–¥–µ–∫—Å–Ω—ã–π —É–∑–µ–ª –∏–º–µ–µ—Ç —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è —á–∏—Å–ª–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ñ–∞–π–ª–µ –∫–∞—Ç–∞–ª–æ–≥–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –¥–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å–Ω—ã–π —É–∑–µ–ª.

   0 -> —Ñ–∞–π–ª —É–¥–∞–ª–µ–Ω -> –±–ª–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ñ–∞–π–ª–æ–º, –ø–µ—Ä–µ—à–ª–∏ –≤ —Å–ø–∏—Å–æ–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –±–ª–æ–∫–æ–≤

   –ü–æ—ç—Ç–æ–º—É unlink (–æ—Ç—Ü–µ–ø–∏—Ç—å) != delete (—É–¥–∞–ª–∏—Ç—å)

2. –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–∂–Ω—É—é –∑–∞–ø–∏—Å—å, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–ª–∞ –±—ã –Ω–∞ –∏–Ω–¥–µ–∫—Å–Ω—ã–π —É–∑–µ–ª –≤ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ

3. –ü—Ä–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –§–° —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –Ω–∏–∫—É–¥–∞ –Ω–µ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è. –í –∫–∞—Ç–∞–ª–æ–≥ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–Ω–¥–µ–∫—Å–Ω—ã–π —É–∑–µ–ª, –∞ —Å—Ç–∞—Ä–∞—è –∑–∞–ø–∏—Å—å –æ—Ç—Ü–µ–ø–ª—è–µ—Ç—Å—è.

### –°—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞

–í—ã–ø–æ–ª–Ω–∏–º –∫–æ–º–∞–Ω–¥—É `mkdir testdir`

![image-20230219162416571](img/img_07.png)

# –°–æ–∫–µ—Ç—ã

–°–æ–∫–µ—Ç -- —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è. 

## –î–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å–æ–∫–µ—Ç–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–∫–µ—Ç–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã —Å–æ–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤ —é–Ω–∏–∫—Å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã —Ç–∞–∫ –∂–µ, –∫–∞–∫ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã —Ñ–∞–π–ª–æ–≤. 

```c
#include <sys/socket.h>

int socket(int domain, int type, int protocol);
// –°–æ–∑–¥–∞–µ—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å–æ–∫–µ—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞, -1 –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
```

### domain

–ê—Ä–≥—É–º–µ–Ω—Ç domain –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏—Ä–æ–¥—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, –≤–∫–ª—é—á–∞—è —Ñ–æ—Ä–º–∞—Ç –∞–¥—Ä–µ—Å–∞.

| –î–æ–º–µ–Ω       | –û–ø–∏—Å–∞–Ω–∏–µ             |
| ----------- | -------------------- |
| `AF_INET`   | –î–æ–º–µ–Ω –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ IPv4 |
| `AF_INET6`  | –î–æ–º–µ–Ω –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ IPv6 |
| `AF_UNIX`   | –î–æ–º–µ–Ω UNIX           |
| `AF_UNSPEC` | –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω |

> –ò–º–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞ AF_ (address family - —Å–µ–º–µ–π—Å—Ç–≤–æ –∞–¥—Ä–µ—Å–æ–≤), –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∂–¥—ã–π –¥–æ–º–µ–Ω –æ–±–ª–∞–¥–∞–µ—Ç —Å–≤–æ–∏–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤.

### type

–¢–∏–ø —Å–æ–∫–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è. 

| –¢–∏–ø              | –û–ø–∏—Å–∞–Ω–∏–µ                                                     |
| ---------------- | ------------------------------------------------------------ |
| `SOCK_DGRAM`     | –ù–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Å–æ–æ–±—â–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω–Ω—ã, –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è |
| `SOCK_RAW`       | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–µ–π—Ç–∞–≥—Ä–∞–º–º –∫ –ø—Ä–æ—Ç–æ–∫–æ–ª—É IP                          |
| `SOCK_SEQPACKET` | –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, —Å–æ–æ–±—â–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π |
| `SOCK_STREAM`    | –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –±–∞–π—Ç—Ä–æ–≤. |

### protocol

–û–±—ã—á–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è 0, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ –∏ —Ç–∏–ø–∞ —Å–æ–∫–µ—Ç–∞. 

| –î–æ–º–µ–Ω     | –¢–∏–ø              | –ü—Ä–æ—Ç–æ–∫–æ–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                                        | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                                                  |
| --------- | ---------------- | :----------------------------------------------------------- | ------------------------------------------------------------ |
| `AF_INET` | `SOCK_STREAM`    | `TCP` (Transmission Control Protocol) -- –ø—Ä–æ—Ç–æ–∫–æ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö | –ü–æ—Ç–æ–∫–∏ –±–∞–π—Ç–æ–≤ —Ç—Ä–µ–±—É—é—Ç, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –Ω–∞—à–∏–º —Å–æ–∫–µ—Ç–æ–º –∏ —Å–æ–∫–µ—Ç–æ–º, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏–º —Å–µ—Ç–µ–≤–æ–º—É —É–∑–ª—É, —Å –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å, –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (–∞–Ω–∞–ª–æ–≥–∏—è -- —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫) |
| `AF_INET` | `SOCK_DGRAM`     | `UDP` (User Datagram Protocol) -- –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Ç–∞–≥—Ä–∞–º–º | –î–µ–π—Ç–∞–≥—Ä–∞–º–º—ã -- —ç—Ç–æ —Å–ª—É–∂–±–∞, –Ω–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.  <br /> <br />–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –¥–µ–π—Ç–∞–≥—Ä–∞–º–º –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –í—Å–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å -- —ç—Ç–æ –ø–µ—Ä–µ–¥–∞ —Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ –∞–¥—Ä–µ—Å—É —Å–æ–∫–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º –Ω–∞ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ü–µ (–∞–Ω–∞–ª–æ–≥–∏—è -- –ø–∏—Å—å–º–∞ –ø–æ –ø–æ—á—Ç–µ) |
| `AF_INET` | `SOCK_SEQPACKET` | `SCTP` (Stream Control Tramsmission Protocol) -- –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ—Ç–æ–∫–æ–º | –£—Å–ª—É–≥–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π -- –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏ –Ω–∞  `SOCK_STREAM`, –Ω–æ –≤–º–µ—Å—Ç–æ –ø—Ä–∏–µ–º–∞/–ø–µ—Ä–µ–¥–∞—á–∏ –≤ –≤–∏–¥–µ –ø–æ—Ç–æ–∫–∞ –±–∞–π—Ç–æ–≤, –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ |
| `AF_INET` | `SOCK_RAW`       | `IP` ?                                                       | –°–æ–∫–µ—Ç—ã `SOCK_RAW` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–µ–π—Ç–∞–≥—Ä–∞–º–º –Ω–∞ —Å–µ—Ç–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ (—Ç–æ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫ –ø—Ä–æ—Ç–æ–∫–æ–ª—É `IP` –≤ –¥–æ–º–µ–Ω–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç). –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤—Å—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –ø–∞–∫–µ—Ç–æ–≤ –≤–æ–∑–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ç–∞–∫ –∫–∞–∫ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ç—Ä–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è TCP –∏–ª–∏ UDP). –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω—É–∂–Ω–æ –æ–±–ª–∞–¥–∞—Ç—å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. |



## –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–∫–µ—Ç–∞–º–∏

–ü—Ä–∏–≤–µ–¥—É –ø–µ—Ä–µ—á–µ–Ω—å —Å–∞–º—ã—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Å–æ–∫–µ—Ç–æ–º                           |
| ------- | -------------------------------------------------------- |
| `close` | –û—Å–≤–æ–±–æ–¥–∏—Ç—å —Å–æ–∫–µ—Ç                                         |
| `read`  | –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –≤—ã–∑–æ–≤—É —Ñ—É–Ω–∫—Ü–∏–∏ `recv` –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Ñ–ª–∞–≥–æ–≤ |
| `write` | –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –≤—ã–∑–æ–≤—É —Ñ—É–Ω–∫—Ü–∏–∏ `send` –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Ñ–ª–∞–≥–æ–≤ |

–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç—ã —è–≤–ª—è–µ—Ç—Å—è –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–¥–µ–ª–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ —Å–æ–∫–µ—Ç–∞–º–∏ –º–æ–∂–Ω–æ –∑–∞–ø—Ä–µ—Ç–∏—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `shutdown`

```c
#include <sys/socket.h>

int shutdown(int sockfd, int how);
// how == SHUT_RD - –∑–∞–ø—Ä–µ—Ç–∏—Ç—å —á—Ç–µ–Ω–∏–µ –∏–∑ —Å–æ–∫–µ—Ç–∞
// how == SHUT_WR - –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ —Å–æ–∫–µ—Ç
// how == SHUT_RDWR - –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –æ–±–æ–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
```

–û—Ç–ª–∏—á–∏—è `shutdown` –æ—Ç `close`:

1. `close` –∑–∞–∫—Ä–æ–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–∫–µ—Ç. `shutdown` –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∫–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Å—ã–ª–∞—é—â–∏—Ö—Å—è –Ω–∞ –Ω–µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ–≤.
2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏. 

## –ê–¥—Ä–µ—Å–∞—Ü–∏—è

–ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞, —Å –∫–æ—Ç–æ—Ä—ã–º –º—ã —Ö–æ—Ç–∏–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å? –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–∞—è —á–∞—Å—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π:

1. –°–µ—Ç–µ–≤–æ–π –∞–¥—Ä–µ—Å –∫–æ–º–ø—é—Ç–µ—Ä–∞ 

   –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤–æ–π —É–∑–µ–ª, —Å –∫–æ—Ç–æ—Ä—ã–º –º—ã –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º –≤—Å—Ç—É–ø–∏—Ç—å –≤ –∫–æ–Ω—Ç–∞–∫—Ç

2. –ù–æ–º–µ—Ä —Å–ª—É–∂–±—ã 

   –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ —ç—Ç–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ

### –ü–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤

-- —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ —Å–ª–µ–¥—É—é—Ç –±–∞–π—Ç—ã –≤ –¥–∞–Ω–Ω—ã—Ö –¥–ª–∏–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ (–Ω. —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞).

| –ù–∞–∑–≤–∞–Ω–∏–µ                 | –û–ø–∏—Å–∞–Ω–∏–µ                                             | –ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è                                |
| ------------------------ | ---------------------------------------------------- | ------------------------------------------ |
| –û–±—Ä–∞—Ç–Ω—ã–π (`big-endian`)  | –í —Å—Ç–∞—Ä—à–µ–º –∞–¥—Ä–µ—Å–µ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –º–ª–∞–¥—à–∏–π –∑–Ω–∞—á–∞—â–∏–π –±–∞–π—Ç | ![image-20230219162416571](img/img_05.png) |
| –ü—Ä—è–º–æ–π (`little-endian`) | –ú–ª–∞–¥—â–∏–π –∑–Ω–∞—á–∞—â–∏–π –±–∞–π—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –º–ª–∞–¥—â–µ–º –∞–¥—Ä–µ—Å–µ      | ![image-20230219162416571](img/img_06.png) |

```
!!! –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç –°–ó–ë –≤—Å–µ–≥–¥–∞ —Å–ª–µ–≤–∞, –∞ –ú–ó–ë - —Å–ø—Ä–∞–≤–∞.
0x04030201 - –°–ó–ë –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ 4, –º–ª–∞–¥—â–∏–π 1, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç–æ–≤.

–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å—Å—ã–ª–∫–∞—Ö: –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å char *, —Ç–æ
  -- –Ω–∞ –º–∞—à–∏–Ω–µ —Å –ø—Ä—è–º—ã–º –ø–æ—Ä—è–¥–∫–æ–º cp[0] —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –º–ª–∞–¥—â–∏–π –±–∞–π—Ç -> 1
  -- –Ω–∞ –º–∞—à–∏–Ω–µ —Å –æ–±—Ä–∞—Ç–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º cp[0] —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–∞—Ä—à–∏–π -> 4
```

| –û–°            | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ | –ü–æ—Ä—è–¥–æ–∫  |
| ------------- | ---------------------- | -------- |
| FreeBSD 5.2.1 | Intel Pentium          | –ü—Ä—è–º–æ–π   |
| Linux 2.4.22  | Intel Pentium          | –ü—Ä—è–º–æ–π   |
| Mac OS X 10.3 | PowerPC                | –û–±—Ä–∞—Ç–Ω—ã–π |
| Solaris 9     | Sun SPARC              | –û–±—Ä–∞—Ç–Ω—ã–π |

### –ü–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞—Ö

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ TCP/IP –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Å–µ—Ç–µ–≤–æ–π (–æ–±—Ä–∞—Ç–Ω—ã–π)** –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤.

–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É —Å–µ—Ç–µ–≤—ã–º –∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π

```c
#include <arpa/inet.h>

uint32_t htonl(uint32_t hostint32); // –≤–µ—Ä–Ω—É—Ç—å 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ —Å —Å–µ—Ç–µ–≤—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤
uint16_t htons(uint16_t hostint16); // –≤–µ—Ä–Ω—É—Ç—å 16-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ —Å —Å–µ—Ç–µ–≤—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤

uint32_t ntohl(uint32_t netint32);  // –≤–µ—Ä–Ω—É—Ç—å 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ —Å –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤
uint16_t ntohs(uint16_t netint16);  // –≤–µ—Ä–Ω—É—Ç—å 16-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ —Å –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤
```

> n -- network (—Å–µ—Ç–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤)
>
> h -- host (–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π)
>
> l -- long 
>
> s -- short

### –§–æ—Ä–º–∞—Ç—ã –∞–¥—Ä–µ—Å–æ–≤

–ê–¥—Ä–µ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–∫–µ—Ç–æ–≤ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –¥–æ–º–µ–Ω–µ. –û–±–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–¥—Ä–µ—Å–∞:

```c
struct sockaddr {
  sa_family sa_family; /* —Å–µ–º–µ–π—Å—Ç–≤–æ –∞–¥—Ä–µ—Å–æ–≤ */
  char 			sa_data[]; /* –∞–¥—Ä–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω—ã */
  ...
}
```

–§–æ—Ä–º–∞—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω–æ–º —Ñ–∞–ª–µ `<netinet/in.h`. –ê–¥—Ä–µ—Å–∞ —Å–æ–∫–µ—Ç–æ–≤ –∏–∑ –¥–æ–º–µ–Ω–∞ `IPv4` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π 

```c
struct in_addr {
  in_addr_t s_addr; 		/* 	–∞–¥—Ä–µ—Å IPv4 */
};

struct sockaddr_in {
  sa_family      sa_family;   /* —Å–µ–º–µ–π—Å—Ç–≤–æ –∞–¥—Ä–µ—Å–æ–≤ */
  in_port_t      sin_port;    /* –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞ */
  struct in_addr sin_addr;    /* –∞–¥—Ä–µ—Å IPv4 */
}
```

–ê–¥—Ä–µ—Å–∞ —Å–æ–∫–µ—Ç–æ–≤ –¥–æ–º–µ–Ω–∞ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç IPv6 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π `sockaddr_ip6`.



–ò–Ω–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤—ã–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å–∞ –≤ –≤–∏–¥–µ, —É–¥–æ–±–Ω–æ–º –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞. –î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏:

* `inet_ntop` -- –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∞–¥—Ä–µ—Å –∏–∑ –¥–≤–æ–∏—á–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å —Å–µ—Ç–µ–≤—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞—Ç–æ–≤ –≤ —Ç–µ–∫—Å—Ç–æ–≤—É—é —Å—Ç—Ä–æ–∫—É
* `inet_pton` -- –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç–≤—É—é —Å—Ç—Ä–æ–∫—É –≤ –¥–≤–æ–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å —Å–µ—Ç–µ–≤—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤.

```c
#include <anpa/inet.h>
cons chat *inet_ntop(int domain, const void *restrict addr,
                    char *restrict str, socklen_t size);
/* –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–æ–∫—É —Å –∞–¥—Ä–µ—Å–æ–º –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞, NULL –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ */
```

```c
int inet_pton(int domain, const char *restrict str, void *restrict addr);
/* –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 1 –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞, 0 –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, -1 –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ */
```

## –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞

> üìç –í –∏–¥–µ–∞–ª–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–Ω–∞—Ç—å –æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∞–¥—Ä–µ—Å–∞ —Å–æ–∫–µ—Ç–∞. 

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ç–∏ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–∞—Ö (`/etc/hosts`, `/etc/services` –∏ –¥—Ä—É–≥–∏–µ) –∏–ª–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–µ—Ç–µ–≤—ã–º–∏ —Å–ª—É–∂–±–∞–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ `DNS` (Domain Name System -- —Å–∏—Å—Ç–µ–º–∞ –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º–µ–Ω) –∏ `NIS` (Network Information Service -- —Å–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–ª—É–∂–±–∞). –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ñ—É–Ω–∫—Ü–∏–∏.

–ê–¥—Ä–µ—Å–∞ —Ö–æ—Å—Ç–æ–≤, –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∑–∞–¥–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `gethostent`.

```c
#include <netdb.h>
struct hostent *gethostent(void); 
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –æ—á–µ—Ä–µ–¥–Ω—É—é –∑–∞–ø–∏—Å—å –∏–∑ —Ñ–∞–π–ª–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ–± –∞–¥—Ä–µ—Å–∞—Ö –∏–ª–∏ NULL

void sethostent(int stayopen);
// –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –µ–≥–æ –Ω–∞—á–∞–ª–æ, –µ—Å–ª–∏ –æ–Ω —É–∂–µ –æ—Ç–∫—Ä—ã—Ç

void endhostent(void);
// –ó–∞–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª
```

–ö–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è `gethostent` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –º—ã –ø–æ–ª—É—á–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `hostent`, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è –≤ –æ–±–ª–∞—Å—Ç–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∑–∞—Ç–µ—Ä—Ç–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

```c
struct hostent {
  char *h_name;					/* –∏–º—è —Ö–æ—Å—Ç–∞ */
  char **h_aliases;			/* —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–∞—Å—Å–∏–≤ –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–≤ */
  int h_addrtype; 			/* —Ç–∏–ø –∞–¥—Ä–µ—Å–∞ */
  int h_length;					/* –¥–ª–∏–Ω–∞ –∞–¥—Ä–µ—Å–∞ –≤ –±–∞–π—Ç–∞—Ö */
  char **h_addr_list;		/* —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–∞—Å—Å–∏–≤ —Å–µ—Ç–µ–≤—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ */
  ...
}
```

–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∞–¥—Ä–µ—Å–∞ –∏–º–µ—é—Ç **—Å–µ—Ç–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤**.

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω —Å–µ—Ç–µ–π –∏ –∏—Ö –Ω–æ–º–µ—Ä–æ–≤ (–Ω–æ–º–µ—Ä —Å–µ—Ç–∏ –∏–º–µ–µ—Ç —Å–µ—Ç–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤):

```c
#include <netdb.h>
struct netent *getnetbyaddr(uint32_t net, int type);
struct netent *getnetbyname(const char *name);
struct netent *getnetent(void);
// –í—Å–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞, NULL –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏

void setnetent(int stayopen);
void endnetent(void);

struct netent {
  char *n_name;			/* –∏–º—è —Å–µ—Ç–∏ */
  char **n_aliases;	/* —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–∞—Å—Å–∏–≤ –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–≤ —Å–µ—Ç–∏ */
  int n_addrtype;   /* —Ç–∏–ø –∞–¥—Ä–µ—Å–∞ */
  unit32_t n_net;		/* –Ω–æ–º–µ—Ä —Å–µ—Ç–∏ */
  ...
}
```

–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É –∏–º–µ–Ω–∞–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ –∏—Ö –Ω–æ–º–µ—Ä–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π:

```c
#include <netdb.h>
struct protoent *getprotobyname(const chat *name);
struct protoent *getprotobynumber(int proto);
struct protoent *getprotoent(void);
// –í—Å–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞, NULL –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏

void setprotoent(int stayopen);
void endproroent(void);

struct protoent {
  char *p_name;				/* –∏–º—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ */
  char **p_aliases;		/* —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–∞—Å—Å–∏–≤ –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ */
  int p_proto;				/* –Ω–æ–º–µ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ */
}
```

–°–ª—É–∂–±—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –Ω–æ–º–µ—Ä–æ–º –ø–æ—Ä—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∞–¥—Ä–µ—Å–∞. –ö–∞–∂–¥–æ–π —Å–µ—Ç–µ–≤–æ–π —Å–ª—É–∂–±–µ –ø—Ä–∏—Å–≤–æ–µ–Ω —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞

```c
#include <netdb.h>
struct servent *getservbyname(const char *name, const char *proto);
// –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞ –ø–æ –∏–º–µ–Ω–∏ —Å–ª—É–∂–±—ã

struct servent *getservbyport(int port, const char *proto);
// –ü–æ–ª—É—á–∏—Ç—å –∏–º—è —Å–ª—É–∂–±—ã –ø–æ –Ω–æ–º–µ—Ä—É –ø–æ—Ä—Ç–∞

struct servent *getservent(void);
// –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å–ª—É–∂–±

void setservent(int stayopen);
void endservent(void);

struct servent {
  char *s_name;				/* –∏–º—è —Å–ª—É–∂–±—ã */
  char ** s_aliases;  /* —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–∞—Å—Å–∏–≤ –ø—Å–≤–µ–¥–æ–Ω–∏–º–æ–≤ —Å–ª—É–∂–±—ã */
  int s_port;					/* –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞ */
  char *s_proto;			/* –∏–º—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ */
  ...
}
```

–ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –∞–¥—Ä–µ—Å –∏–∑ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞ –∏ –∏–º–µ–Ω–∏ —Å–ª—É–∂–±—ã.

```c
#include <sys/socket.h>
#include <netdb.h>

int getaddrinfo(const char *restrict host, const char *restrict service,
               const struct addrinfo *restrict hint,
               struct addrinfo **restrict res);
void freeaddrinfo(struct addrinfo *ai);

struct addrinfo {
  int ai_flags;										// —Ñ–ª–∞–≥–∏
  int ai_family;									// —Å–µ–º–µ–π—Å—Ç–≤–æ –∞–¥—Ä–µ—Å–æ–≤
  int ai_socktype;								// —Ç–∏–ø —Å–æ–∫–µ—Ç–∞
  int ai_protocol;								// –ø—Ä–æ—Ç–æ–∫–æ–ª
  socklen_t ai_addrlen;						// –¥–ª–∏–Ω–∞ –∞–¥—Ä–µ—Å–∞ –≤ –±–∞–π—Ç–∞—Ö 
  struct sockaddr *ai_addr;				// –∞–¥—Ä–µ—Å
  char *ai_canonname;							// –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–µ –∏–º—è —Ö–æ—Å—Ç–∞
  struct addrinfo *ai_next;				// —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
}

// –§–ª–∞–≥–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
```

## –ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ —Å–æ–∫–µ—Ç–∞–º

–ê–¥—Ä–µ—Å, –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º—ã–π –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É —Å–æ–∫–µ—Ç—É, –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–ª—è –Ω–∞—Å –æ—Å–æ–±–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞, –∏ –ø–æ—Ç–æ–º—É –º—ã –º–æ–∂–µ–º –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–∏—Å—Ç–µ–º–µ –≤—ã–±–∏—Ä–∞—Ç—å –∞–¥—Ä–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –û–¥–Ω–∞–∫–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å —Å–æ–∫–µ—Ç—É –ø—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –∫–ª–∏–µ–Ω—Ç—ã –±—É–¥—É—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã. –ö–ª–∏–µ–Ω—Ç–∞–º –Ω–µ–æ–±—Ö–æ–∏–¥–∏–º–æ –∑–∞—Ä–∞–Ω–µ–µ –∑–Ω–∞—Ç—å —Ç—Ä–µ–±—É–µ–º—ã–π –∞–¥—Ä–µ—Å, —á—Ç–æ–±—ã –≤–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–∞–∫—Ç —Å —Å–µ—Ä–≤–µ—Ä–æ–º.

–°–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ -- –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ñ–∞–π–ª–µ `/etc/services` –∏–ª–∏ –≤ —Å–ª—É–∂–±–µ –∏–º–µ–Ω.

```c
#include <sys/socket.h>
int bind(int sockfd, consst struct sockaddr *addr, socklen_t len);
// –ê—Å—Å–æ—Ü–∏–∏—Ä—É–µ–º –∞–¥—Ä–µ—Å —Å —Å–æ–∫–µ—Ç–æ–º
```

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

* –£–∫–∞–∑—ã–≤–∞–µ–º—ã–π –∞–¥—Ä–µ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –∞–¥—Ä–µ—Å–æ–º –¥–ª—è –º–∞—à–∏–Ω—ã, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å -- –º—ã –Ω–µ –º–æ–∂–µ—Ç –∑–∞–¥–∞—Ç—å –∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥—Ä—É–≥–æ–π –º–∞—à–∏–Ω–µ.
* –§–æ—Ä–º–∞—Ç –∞–¥—Ä–µ—Å–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ñ–æ—Ä–º–∞—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å–µ–º–µ–π—Å—Ç–≤–æ–º –∞–¥—Ä–µ—Å–æ–≤, —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–∫–µ—Ç–∞.
* –ù–æ–º–µ—Ä –ø–æ—Ä—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ 1024, –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∏–º–µ–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
* –û–±—ã—á–Ω–æ –∫–∞–∂–¥—ã–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–¥—Ä–µ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω —Ç–æ–ª—å–∫–æ —Å –æ–¥–Ω–∏–º —Å–æ–∫–µ—Ç–æ–º, —Ö–æ—Ç—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –¥–æ–ø—É—Å–∫–∞—é—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∞–¥—Ä–µ—Å–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–æ–∫–µ—Ç–∞–º–∏.

–í –¥–æ–º–µ–Ω–µ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –∏–º–µ–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π IP-–∞–¥—Ä–µ—Å `INADDR_ANY`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–¥—Ä–µ—Å–∞–º –≤—Å–µ—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ.

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å, –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω—ã–π —Å–æ–∫–µ—Ç—É, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `getsockname`.

```c
#include <sys/socket.h>
int getsockname(int sockfd, struct sockaddr *restrict addr,
               socklen_t *restirct alenp);
```

–ï—Å–ª–∏ —Å–æ–∫–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω —Å —É–¥–∞–ª–µ–Ω–Ω—ã–º —É–∑–ª–æ–º, –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —É–∑–ª–∞, –æ–±—Ä–∞—Ç–∏–≤—à–∏—Å—å –∫ —Ñ—É–Ω–∫—Ü–∏–∏ `getpeername`.

```c
#include <sys/socket.h>
int getpeername(int sockfd, struct sockaddr *restrict addr,
               socklen_t *restrict alenp);
```

## –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

–ï—Å–ª–∏ –º—ã –∏–º–µ–µ–º –¥–µ–ª–æ —Å —Å–µ—Ç–µ–≤–æ–π —Å–ª—É–∂–±–æ–π, –∫–æ—Ç–æ—Ä–∞—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (`SOCK_STREAM`, `SOCK_SEQPACKET`), —Ç–æ –ø—Ä–µ–∂–¥–µ, —á–µ–º –Ω–∞—á–∞—Ç—å –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–æ–∫–µ—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å–∞, –ø–æ—Å—ã–ª–∞—é—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å, –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–º, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–º —É—Å–ª—É–≥—É (—Å–µ—Ä–≤–µ—Ä–æ–º). –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `connect`.

```c
#include <sys/socket.h>
int connect(int sockfd, const struct sockaddr *addr, socklen_t len);
```

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–æ–∫:

* –º–∞—à–∏–Ω–∞, —Å –∫–æ—Ç–æ—Ä–æ–π –º—ã –ø—ã—Ç–∞–µ–º—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞ –∏–ª–∏ –Ω–µ —Å–≤—è–∑–∞–Ω–∞ —Å —Å–µ—Ç—å—é
* —Å–µ—Ä–≤–µ—Ä—É –Ω–µ –ø—Ä–∏—Å–≤–æ–µ–Ω –∞–¥—Ä–µ—Å, —Å –∫–æ—Ç–æ—Ä—ã–º –º—ã –ø—ã—Ç–∞–µ–º—Å—è —Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
* –≥–µ—Ç –º–µ—Å—Ç–∞ –≤ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞

> –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–æ–≥–¥–∞ –¥–µ–∫—Å—Ç—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∑–∞–ø–∏—Å–∏, —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `poll` –∏–ª–∏ `select`.

–í —Ü–µ–ª–æ–º `connect ` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª—É–∂–±–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –±—É–¥–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π, —Ç–∞–∫ –∫–∞–∫ –æ—Å–≤–æ–±–æ–¥–∏—Ç –Ω–∞—Å –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∞–¥—Ä–µ—Å –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞–∞—á–µ –∫–∞–∂–¥–æ–π –¥–µ–π—Ç–∞–≥—Ä–∞–º–º—ã. + –º—ã –±—É–¥–µ–º –ø–æ–ª—É—á–∞—Ç—å –¥–µ–π—Ç–∞–≥—Ä–∞–º–º—ã —Ç–æ–ª—å–∫–æ —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞.

–° –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `listen` —Å–µ—Ä–≤–µ—Ä –∑–∞—è–≤–ª—è–µ—Ç –æ —Å–≤–æ–µ–º –∂–µ–ª–∞–Ω–∏–∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

```c
#include <sys/socket.h>
int listen(int sockfd, int backlog);
// backlog -- –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
```

–§—É–Ω–∫—Ü–∏—è `accept` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ–≥–æ –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

```c
#include <sys/socket.h>
int accept(int sockfd, struct sockaddr *restrict addr, socklen_t *restrict len);
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å–æ–∫–µ—Ç–∞, —Å–æ–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ —Å –∫–ª–∏–µ–Ω—Ç–æ–º
```

## –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö

–ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `read` –∏ `write`.

### –§—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

* `send` -- –ø–æ—Ö–æ–∂–∞ –Ω–∞ `write`, –Ω–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –Ω–µ–µ –ø–æ–∑–æ–≤–ª—è–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –¥–æ–ø —Ñ–ª–∞–≥–∏

  ```c
  #include <sys/socket.h>
  ssize_t send(int sockfd, const void *buf, size_t nbytes, int flags);
  ```

  | –§–ª–∞–≥            | –û–ø–∏—Å–∞–Ω–∏–µ                                                     |
  | --------------- | ------------------------------------------------------------ |
  | `MSG_DONTROUTE` | –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–∫–µ—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏                |
  | `MSG_DONTWAIT`  | –†–∞–∑—Ä–µ—à–∏—Ç—å –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π —Ä–µ–∂–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏            |
  | `MSG_EDR`       | –û–±–æ–∑–Ω–∞—á–∞–∞–µ—Ç –∫–æ–Ω–µ—Ü –∑–∞–ø–∏—Å–∏, –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ–∫–æ–ª–æ–º       |
  | `MSG_OOB`       | –û–±–æ–∑–Ω–∞—á–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º |

  –í—Å–µ —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è -- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã–º –¥—Ä–∞–π–≤–µ—Ä–∞–º (—Ç–æ –µ—Å—Ç—å –Ω–µ —Ñ–∞–∫—Ç, —á—Ç–æ –Ω–∞ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ü–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ–ª—É—á–∞—Ç –Ω–æ—Ä–º –¥–∞–Ω–Ω—ã–µ)

* `sendto` -- –æ—Ç–ª–∏—á–∏–µ –æ—Ç `send` –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Å–æ–∫–µ—Ç–∞–º–∏ —Ç–∏–ø–∞ `SOCK_DGRAM`

  ```c
  #include <sys/socket.h>
  ssize_t sendto(int sockfd, const void *buf, size_t nbytes, int flags,
                const struct sockaddr *destaddr, socklen_t destlen).
  ```

* `sendmsg` 

  ```c
  #include <sys/socket.h>
  ssize_t sendmsg(int sockfd, const struct msghdr *msg, int flags);
  ```

  ```c
  struct msghdr {
    void *msg_name;						// –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å 
    socklen_t msg_namelen;		// —Ä–∞–∑–º–µ—Ä –∞–¥—Ä–µ—Å–∞ –≤ –±–∞–π—Ç–∞—Ö
    struct iovec *msg_iov;    // –º–∞—Å—Å–∏–≤ –±—É—Ñ–µ—Ä–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞
    int msg_iovlen;           // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤
    void *msg_control;        // –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    socklen_t msg_controllen; // –æ–±—ä–µ—Å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–π—Ç–∞—Ö
    int msg_flags;            // —Ñ–ª–∞–≥–∏ –ø—Ä–∏–Ω—è—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    ...
  }
  ```

### –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

* `recv` -- –ø–æ—Ö–æ–∂–∞ –Ω–∞ `read`, –Ω–æ –≤ –æ—Ç–ª–∏—á–∏–Ω –æ—Ç –Ω–µ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –¥–æ–ø —Ñ–ª–∞–≥–∏

  ```c
  #include <sys/socket.h>
  ssize_t recv(int sockfd, void *buf, size_t nbytes, int flags)
  ```

  | –§–ª–∞–≥          | –û–ø–∏—Å–∞–Ω–∏–µ                                                  |
  | ------------- | --------------------------------------------------------- |
  | `MSG_OOB`     | –ü—Ä–∏–Ω—è—Ç—å —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º |
  | `MSG_PEEK`    | –í–µ—Ä–Ω—É—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–∫–µ—Ç–∞, –Ω–æ –Ω–µ —É–¥–∞–ª—è—Ç—å –µ–≥–æ –∏–∑ –æ—á–µ—Ä–µ–¥–∏   |
  | `MSG_TRUNC`   | –ó–∞–ø—Ä–æ—Å–∏—Ç—å, —á—Ç–æ–±—ã –±—ã–ª –≤–æ–∑–≤—Ä–∞—â–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞     |
  | `MSG_WAITALL` | –ñ–¥–∞—Ç, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ                   |

*  `recvfrom` -- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥—Ä–µ—Å, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö

* `recvmsg` -- –ø—Ä–∏–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±—É—Ñ–µ—Ä–æ–≤ (665 —Å—Ç—Ä)

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å —Å–æ–∫–µ—Ç–∞–º–∏

![image-20230219162416571](img/img_03.jpg)

![image-20230219162416571](img/img_02.jpg)

–§–ª–∞–≥–∏ –¥–ª—è —Å—Ç—É–∫—Ä—É—Ç—Ä—ã addrinfo

![image-20230219162416571](img/img_08.png)
